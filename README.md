# SimpleLang
SimpleLang is a custom programming language designed to be compiled and run on the 8-bit computer emulator available at <https://github.com/lightcode/8bit-computer>.
## Language Features
### Variable Declarations
```
int a;
int b;
int c;
```
### Assignments
```
a = 6;  // a must be declared before being used
b = 7;
```
### Arithmetic Operations
Note: doesnt have any operator precedence, and only supports +, -
```
c = a + b;
a = a + b + 6;
b = 7 - 6;
```
### Conditionals
```
if (c == 13) {
    c = 102;
}
```


# Build Instructions
```
mkdir build
cd build
cmake ..
make
```

inside the build dir you will see an executable ./simpleLang, that is the compiler for SimpleLang

feed the compiler with the path to a simpleLang src file 
<br><br>

`example.sl`
```
// Variable declaration
int a;
int b;
int c;

// Assignment
a = 7;
b = 20;
c = a + b + 5;

// Conditional
if (c == 32) {
    a = 100 - 9;
}
```
<br><br>
to compile the .sl src (make sure the path is relative to the compiler)

```
./simpleLang example.sl
```

<br><br>
The corresponding assembly code will be displayed on the console. To capture this output and save it to a file, you can use piping (indicated by the '|' symbol) followed by the desired filename.

```
./simpleLang example.sl > test.asm

```
<br><br>
You can now run the compiled .asm in the 8bit-computer, follow their README.md for steps to run.


<br>
<br>


# About the Compiler Internals
## Lexer
The lexer reads the src file character by character and spits out tokens when ever possible
## Parser
The parser trys to create an AST following the grammer of the language.<br><br>
To avoid multiple allocation calls, we use a pool allocator, which allocates a large amount upfront and frees them all togther.
## Interpreter
The interpreter pushes all the statements in the ast to the stack in reverse order, when ever an if is encountered and the expression is evaluated to true, it pushes its block of code to the stack.
## Code Gen
Code is generated by post order traversal of the AST
